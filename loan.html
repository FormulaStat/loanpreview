<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Request Loan â€” GlobalStoxfx</title>
  <meta name="description" content="Request a Personal or Business loan from GlobalStoxfx. Secure, responsive, and professional loan application form with Terms & Conditions and pending approval flow."/>
  <style>
    /* Minimal, modern professional styling */
    :root{--bg:#0f1724;--card:#ffffff;--muted:#6b7280;--accent:#0b5fff;--danger:#ef4444;--radius:12px;font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#071022 0%, #0b1626 100%);color:var(--muted);display:flex;align-items:center;justify-content:center;padding:28px}
    .wrap{width:100%;max-width:980px}
    .card{background:linear-gradient(180deg,#fff 0%, #fbfdff 100%);border-radius:var(--radius);padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.45);color:#071022}
    header{display:flex;align-items:center;gap:14px}
    .brand{display:flex;flex-direction:column}
    .brand h1{margin:0;font-size:20px;color:var(--accent)}
    .brand p{margin:0;font-size:13px;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:24px;margin-top:20px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}

    /* Left column â€” flow */
    .flow{background:linear-gradient(180deg,#ffffff 0%, #f8fbff 100%);padding:18px;border-radius:10px;border:1px solid #eef3ff}
    .big-btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:10px;background:var(--accent);color:#fff;border:0;font-weight:600;cursor:pointer}

    .step{margin-top:16px}
    .terms{max-height:240px;overflow:auto;padding:12px;border-radius:8px;border:1px solid #eef3ff;background:#fbfdff}
    .muted{color:var(--muted)}

    /* Right column â€” card with form */
    .panel{background:#fff;border-radius:10px;padding:18px;border:1px solid #eef3ff}
    h2{margin:0 0 6px 0;color:#071022}
    p.lead{margin:0 0 12px 0;color:var(--muted);font-size:14px}

    form{display:grid;gap:10px}
    label{display:block;font-size:13px;color:#0b1630}
    input[type=text], input[type=email], input[type=tel], input[type=number], select, textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eefc;background:#fbfdff}
    textarea{min-height:88px;resize:vertical}

    .inline{display:flex;gap:10px}
    .small{font-size:13px;color:var(--muted)}

    .actions{text-align:right;margin-top:8px}
    .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid #e7eefc;color:#071022}

    .notice{padding:10px;border-radius:8px;background:#f2f8ff;border:1px solid #d9eefe;color:#08428a}
    .error{color:var(--danger);font-weight:600}

    .status{display:flex;align-items:center;gap:10px}
    .spinner{width:18px;height:18px;border-radius:50%;border:2px solid rgba(11,95,255,0.2);border-left-color:var(--accent);animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    footer{margin-top:14px;font-size:13px;color:var(--muted);text-align:center}

    /* small helpers */
    .hidden{display:none}
    .chip{display:inline-block;padding:6px 8px;border-radius:999px;background:#f4f8ff;border:1px solid #e6f0ff;color:#064e9c;font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
      <header>
        <div class="logo" aria-hidden="true"><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1" y="1" width="22" height="22" rx="6" fill="#0b5fff"/><path d="M7 12h10M7 8h6" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
        <div class="brand"><h1>GlobalStoxfx</h1><p>Secure loan application â€” personal & business</p></div>
      </header>

      <div class="grid" aria-live="polite">
        <section class="flow" aria-labelledby="flow-title">
          <h3 id="flow-title" style="margin:0 0 8px 0;color:#071022">Request Loan</h3>

          <p class="small">Choose a loan type then review terms and complete the application. The platform requires a 5% upfront processing fee (non-refundable) before disbursement.</p>

          <div style="margin-top:12px">
            <button id="openFormBtn" class="big-btn" aria-expanded="false">ðŸ“¥ Request Loan</button>
          </div>

          <div id="miniTerms" class="step" hidden>
            <h4 style="margin:0 0 6px 0">Loan Terms (summary)</h4>
            <div class="terms" id="termsSummary">
              <!-- concise terms summary for quick reading -->
              <p><strong>Eligibility:</strong> 18+; accurate information required; internal approval.</p>
              <p><strong>Amounts:</strong> Personal $5,000â€“$100,000. Business $100,000â€“$1,000,000,000.</p>
              <p><strong>Interest:</strong> Fixed 3% p.a.</p>
              <p><strong>Repayment:</strong> 24â€“120 months typical; 3-month moratorium applies.</p>
              <p><strong>Upfront fee:</strong> 5% charged before disbursement â€” credited to platform wallet; non-refundable.</p>
            </div>
            <div style="margin-top:10px;text-align:right">
              <button id="readFullTC" class="btn btn-ghost">Read full Terms &amp; Conditions</button>
            </div>
          </div>

          <div id="statusBox" class="step hidden">
            <div id="statusContent" class="notice"></div>
          </div>

        </section>

        <aside class="panel" aria-labelledby="apply-title">
          <div id="intro" aria-hidden="false">
            <h2 id="apply-title">Apply for a Loan</h2>
            <p class="lead">Start by selecting Personal or Business â€” the form will adjust to your choice.</p>

            <div class="inline">
              <button id="typePersonal" class="btn btn-ghost" aria-pressed="false">Personal Loan</button>
              <button id="typeBusiness" class="btn btn-ghost" aria-pressed="false">Business Loan</button>
            </div>

            <div style="margin-top:12px" class="small">You will be required to agree to Terms & Conditions before submitting. After submission the application will show <span class="chip">Pending approval</span>.</div>
          </div>

          <form id="loanForm" class="hidden" novalidate>
            <input type="hidden" name="type" id="loanType" value="">

            <label for="fullName">Full name</label>
            <input id="fullName" name="fullName" type="text" autocomplete="name" required>

            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" required>

            <label for="phone">Phone</label>
            <input id="phone" name="phone" type="tel" autocomplete="tel" required>

            <label for="loanAmount">Loan Amount (USD)</label>
            <input id="loanAmount" name="loanAmount" type="number" min="1000" step="0.01" inputmode="numeric" required>

            <label for="tenure">Preferred Tenure (months)</label>
            <select id="tenure" name="tenure">
              <option value="3">3</option>
              <option value="6">6</option>
              <option value="12">12</option>
              <option value="24">24</option>
              <option value="36">36</option>
              <option value="60">60</option>
              <option value="120">120</option>
            </select>

            <label for="repaymentMethod">Preferred Repayment Method</label>
            <select id="repaymentMethod" name="repaymentMethod">
              <option>Bank Transfer</option>
              <option>Direct Debit</option>
              <option>Mobile Payment</option>
            </select>

            <div id="personalFields" class="hidden">
              <label for="monthlyIncome">Monthly Income (USD)</label>
              <input id="monthlyIncome" name="monthlyIncome" type="number" min="0" step="0.01">

              <label for="monthlyExpenses">Monthly Expenses (USD)</label>
              <input id="monthlyExpenses" name="monthlyExpenses" type="number" min="0" step="0.01">

              <label for="existingDebts">Existing Loans / Debts</label>
              <select id="existingDebts" name="existingDebts"><option>No</option><option>Yes</option></select>
            </div>

            <div id="businessFields" class="hidden">
              <label for="businessPurpose">Business Purpose</label>
              <textarea id="businessPurpose" name="businessPurpose"></textarea>

              <label for="estimatedValue">Estimated Business Value (USD)</label>
              <input id="estimatedValue" name="estimatedValue" type="number" min="0" step="0.01">
            </div>

            <label class="small"><input id="agree" name="agree" type="checkbox" required> I have read and agree to the <a href="#" id="openTClink">Terms &amp; Conditions</a>.</label>

            <div class="actions">
              <button type="button" id="cancelBtn" class="btn btn-ghost">Cancel</button>
              <button type="submit" id="submitBtn" class="btn btn-primary">Submit Application</button>
            </div>

            <div id="formMsg" class="small" role="status" aria-live="polite" style="margin-top:10px"></div>
          </form>

          <div id="result" class="hidden" aria-live="polite">
            <h3 id="resultTitle">Application Submitted</h3>
            <p id="resultText">Your application is pending approval. Reference ID: <strong id="refId">-</strong></p>
            <div class="status"><div class="spinner" aria-hidden="true"></div><div class="small">Our team will review and contact you by email.</div></div>
            <div style="margin-top:12px;text-align:right"><button id="newApplication" class="btn btn-ghost">New application</button></div>
          </div>
        </aside>
      </div>

      <footer>
        <small>GlobalStoxfx â€” Terms governed by the laws stated in the full Terms &amp; Conditions.</small>
      </footer>

    </div>
  </div>

  <!-- Full Terms modal (hidden) -->
  <div id="termsModal" class="hidden" role="dialog" aria-modal="true" aria-labelledby="tcTitle" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:24px;z-index:80">
    <div style="background:white;padding:20px;border-radius:12px;max-width:760px;width:100%;max-height:80vh;overflow:auto;border:1px solid #eef5ff">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px"><h3 id="tcTitle">GlobalStoxfx Loan Terms &amp; Conditions</h3><button id="closeTC" class="btn btn-ghost">Close</button></div>
      <div style="color:#0b1630;line-height:1.5">
        <!-- Use the client's full T&C content here. Keep it accurate to legal language. -->
        <p>These Terms and Conditions ("Agreement") govern the loan services offered by GlobalStoxfx ("Company", "we", "us", "our") to clients ("Borrower", "you", "your"). By applying for and accepting a loan from GlobalStoxfx, you agree to the following:</p>
        <ol>
          <li><strong>Loan Eligibility</strong><br>Borrower must be at least 18 years of age. Borrower must provide accurate personal and/or business information as requested during the application process. Approval is subject to GlobalStoxfx's internal assessment criteria.</li>
          <li><strong>Loan Amounts</strong><br>Personal Loans: Minimum USD $5,000 â€“ Maximum USD $100,000. Business Loans: Minimum USD $100,000 â€“ Maximum USD $1 billion.</li>
          <li><strong>Interest Rate</strong><br>All loans are issued at a fixed interest rate of 3% per annum. Interest is applied to the outstanding principal balance and payable as part of monthly installments.</li>
          <li><strong>Repayment Terms</strong><br>Loan tenure ranges from 24 months (2 years) up to 120 months (10 years) depending on the approved facility. Borrower enjoys a 3-month moratorium period (no repayment required for the first 3 months). Repayments are due monthly thereafter until full settlement of principal and interest.</li>
          <li><strong>Upfront Fee Requirement</strong><br>An upfront fee equal to 5% of the total loan amount is required prior to disbursement. This fee is credited into the Borrower's GlobalStoxfx account wallet for processing and must be paid before loan release. The fee covers processing and administrative costs and insurance policy coverage for the unsecured facility. This fee is non-refundable under all circumstances.</li>
          <li><strong>Loan Disbursement</strong><br>Once the upfront fee is received in full, loan funds are disbursed within 24 hours to the Borrower's designated account. Disbursement is subject to successful verification of application details and fee confirmation.</li>
          <li><strong>Collateral &amp; Security</strong><br>No physical collateral is required for GlobalStoxfx loans. Borrower agrees that the 5% upfront fee serves as part of an insurance-backed risk coverage for the unsecured facility.</li>
          <li><strong>Late Payment &amp; Default</strong><br>GlobalStoxfx does not charge late fees. However, persistent default beyond 60 days may result in suspension of account privileges, legal recovery action where applicable, and reporting to relevant credit bureaus.</li>
          <li><strong>Borrower Responsibilities</strong><br>Provide accurate and up-to-date contact and financial information. Use the loan strictly for the purpose stated in the application. Ensure timely repayment according to the agreed schedule.</li>
          <li><strong>GlobalStoxfx Rights</strong><br>We reserve the right to decline any loan application without obligation to provide reasons. We may adjust loan policies, rates, or conditions from time to time, with reasonable notice to clients. We retain the right to recover outstanding balances through lawful collection methods in case of default.</li>
          <li><strong>Governing Law</strong><br>These Terms &amp; Conditions are governed by the laws of Australia and applicable international financial regulations.</li>
          <li><strong>Agreement</strong><br>By applying for and accepting a loan from GlobalStoxfx, the Borrower acknowledges that they have read, understood, and agreed to these Terms &amp; Conditions.</li>
        </ol>
      </div>
    </div>
  </div>

  <script>
    // Professional front-end behavior with robust UX and clear hooks to backend
    (function(){
      const openFormBtn = document.getElementById('openFormBtn');
      const miniTerms = document.getElementById('miniTerms');
      const readFullTC = document.getElementById('readFullTC');
      const termsModal = document.getElementById('termsModal');
      const closeTC = document.getElementById('closeTC');
      const openTClink = document.getElementById('openTClink');

      const typePersonal = document.getElementById('typePersonal');
      const typeBusiness = document.getElementById('typeBusiness');
      const loanForm = document.getElementById('loanForm');
      const loanType = document.getElementById('loanType');
      const personalFields = document.getElementById('personalFields');
      const businessFields = document.getElementById('businessFields');
      const intro = document.getElementById('intro');
      const formMsg = document.getElementById('formMsg');
      const result = document.getElementById('result');
      const resultText = document.getElementById('resultText');
      const refId = document.getElementById('refId');
      const newApplication = document.getElementById('newApplication');
      const cancelBtn = document.getElementById('cancelBtn');
      const submitBtn = document.getElementById('submitBtn');
      const statusBox = document.getElementById('statusBox');
      const statusContent = document.getElementById('statusContent');

      // helpers
      function show(el){ el.classList.remove('hidden'); }
      function hide(el){ el.classList.add('hidden'); }

      // open flow
      openFormBtn.addEventListener('click', ()=>{
        miniTerms.hidden = false;
        document.getElementById('loanForm').classList.add('hidden');
        intro.style.display = 'block';
        openFormBtn.setAttribute('aria-expanded','true');
      });

      readFullTC.addEventListener('click', (e)=>{ e.preventDefault(); termsModal.classList.remove('hidden'); });
      openTClink.addEventListener('click', (e)=>{ e.preventDefault(); termsModal.classList.remove('hidden'); });
      closeTC.addEventListener('click', ()=> termsModal.classList.add('hidden'));

      // choose type
      function setType(type){
        loanType.value = type;
        loanForm.reset();
        document.getElementById('fullName').focus();
        hide(personalFields); hide(businessFields);
        if (type === 'personal') show(personalFields);
        if (type === 'business') show(businessFields);

        intro.style.display = 'none';
        show(loanForm);
        hide(result);
        formMsg.textContent = '';
      }
      typePersonal.addEventListener('click', ()=> setType('personal'));
      typeBusiness.addEventListener('click', ()=> setType('business'));

      cancelBtn.addEventListener('click', ()=>{
        loanForm.reset(); hide(loanForm); intro.style.display='block';
      });

      // client-side validation helper
      function validateForm(data){
        const errors = [];
        if (!data.fullName || data.fullName.trim().length < 2) errors.push('Full name');
        if (!data.email || !/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(data.email)) errors.push('Valid email');
        if (!data.phone || data.phone.trim().length < 6) errors.push('Phone');
        if (!data.loanAmount || Number(data.loanAmount) <= 0) errors.push('Loan amount');
        if (!data.tenure || isNaN(Number(data.tenure))) errors.push('Tenure');
        if (!data.repaymentMethod) errors.push('Repayment method');
        if (!data.agree) errors.push('Agreement to terms');
        if (data.type === 'personal'){ if (!data.monthlyIncome) errors.push('Monthly income'); }
        if (data.type === 'business'){ if (!data.businessPurpose || data.businessPurpose.trim().length < 6) errors.push('Business purpose'); }
        return errors;
      }

      // progressive enhancement: handle form submission
      loanForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        submitBtn.disabled = true; formMsg.textContent = '';

        const formData = new FormData(loanForm);
        const obj = {};
        for (const [k,v] of formData.entries()) obj[k]=v;
        obj.type = loanType.value || obj.type;

        const errs = validateForm(obj);
        if (errs.length){ formMsg.innerHTML = '<span class="error">Please fix: '+ errs.join(', ') +'</span>'; submitBtn.disabled=false; return; }

        // show status
        show(statusBox); statusContent.textContent = 'Submitting application...';

        // API call - replace /api/apply with your server endpoint
        try{
          const resp = await fetch('/api/apply', {
            method: 'POST', headers: {'Content-Type':'application/json'},
            body: JSON.stringify({ type: obj.type, form: obj })
          });
          const json = await resp.json();
          if (!resp.ok) throw json;
          // success
          hide(loanForm);
          show(result);
          refId.textContent = json.id || '-';
          statusContent.textContent = 'Application submitted and is pending approval.';
          resultText.textContent = 'Your application is pending approval. Reference ID: ' + (json.id || '-');

        }catch(err){
          console.error('submit error', err);
          formMsg.innerHTML = '<span class="error">Submission failed. '+(err && err.error ? err.error : 'Please try again later.')+'</span>';
          statusContent.textContent = 'Submission error';
        }finally{ submitBtn.disabled = false; }
      });

      newApplication.addEventListener('click', ()=>{
        loanForm.reset(); hide(result); show(loanForm); loanForm.scrollIntoView({behavior:'smooth'});
      });

      // optional: check status polling for given reference (example)
      async function checkStatus(id){
        try{
          const r = await fetch('/api/status/'+encodeURIComponent(id));
          if (!r.ok) return null;
          return await r.json();
        }catch(e){ return null; }
      }

      // keyboard accessibility: close modal on Esc
      document.addEventListener('keydown',(e)=>{ if (e.key === 'Escape'){ termsModal.classList.add('hidden'); } });

      // Initialization: hide everything until user interacts
      hide(miniTerms);
      hide(statusBox);
    })();
  </script>

  <!--
    Notes for developer/integration:
    - This is a standalone HTML file (loan.html). It expects backend endpoints:
        POST /api/apply    -> { type, form } returns { id, status }
        GET  /api/status/:id -> returns { id, status }

    - Payment: The 5% upfront fee flow is not implemented on this page; to collect payment integrate a payment widget
      (Paystack/Flutterwave/Stripe) before confirming and submitting the application. Recommended flow:
        1. User fills form and agrees to T&C
        2. Clicks "Proceed to Payment" (open payment modal / redirect)
        3. After successful payment, POST /api/apply with payment reference included (server validates payment)
        4. Server stores application with status 'pending' and paymentVerified = true
```)